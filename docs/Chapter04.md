- [4장. 주석](#주석)
    
    [주석은 나쁜 코드를 보완하지 못한다](#주석은-나쁜-코드를-보완하지-못한다)

    [코드로 의도를 표현하라](#코드로-의도를-표현하라)

    [좋은 주석](#좋은-주석)

    [나쁜 주석](#나쁜-주석)

- [오늘의 기억하고 싶은 내용](#오늘의-기억하고-싶은-내용)

***

## 주석

경솔하고 근거 없는 주석은 코드를 이해하기 어렵게 만든다.   또한 오래되고 조잡한 주석은 거짓과 잘못된 정보를 퍼뜨린다.

반면, 좋은 코드에 딸린 주석은 그 어떤 정보보다 유용하다.

하지만, 우리가 주석을 쓰는 경우는 코드로 의도를 표현하지 못하기 때문에, 만회하고자 사용한다.

이 책에서는 왜 이렇게 주석을 무시하는가 ?

주석은 오래될수록 코드에서 멀어진다. 오래될 수록 완전히 분리될 수도 있다.

이유는 하나이다. 코드가 변화하고 진화할 수록, 주석도 업데이트를 해주어야 한다.   하지만, 그렇지 못하는 경우가 흔하기 때문이다.

### 주석은 나쁜 코드를 보완하지 못한다

코드에 주석을 추가하는 일반적인 이유는 코드 품질이 나쁘기 때문이다.

짜고 보니 짜임새가 엉망이고 알아먹기 어렵고, 지저분한 모듈이라는 사실을 뒤늦게 자각한다.

그렇기 때문에 주석을 달아야 한다고 생각한다.  이럴 땐 코드를 정리하는 것이 맞다.

표현력이 풍부하고 깔끔하며 주석이 거의 없는 코드가 복잡하고 어수선하며 주석이 많이 달린 코드보다 훨씬 좋다.

***

### 코드로 의도를 표현하라

확실히 코드만으로 의도를 표현하기 힘든 경우도 많다.

하지만 코드로 대다수 의도를 표현할 수 있다. 아래 예제 두 가지가 존재한다.

해당 예제를 보고, 어느 쪽이 더 나은가 생각해보자.
<pre>
<code>
// 직원에게 복지 혜택을 받을 자격이 있는지 검사한다. 
if((employee.flags & HOURLY_FLAG) && employee.age > 65)

vs

if(employee.isEligibleForFullBenefits())
</code>
</pre>

***

### 좋은 주석

물론 어떤 주석은 필요하거나 유익하다.

정말로 좋은 주석은, 주석을 달지 않을 방법을 찾아낸 주석이라는 사실을 생각하고 읽어보자

#### 법적인 주석

때로는 회사가 정립한 구현 표준에 맞춰, 법적인 이유로 특정 주석을 넣으라고 명시한다.   예를 들면,  각 소스 파일 첫 머리에 주석으로 들어가는 저작권 정보와 소유권 정보가 이러한 경우에 속한다. 필요하고도 타당하다.

***

#### 정보를 제공하는 주석

때로는 기본적인 정보를 주석으로 제공하면 편리하다.

아래 예제는 추상 메서드가 반환할 값을 설명한다.
<pre>
<code>
// 테스트 중인 Responder 인스턴스를 반환한다. 
protected abstract Responder responderInstance();
</code>
</pre>

물론 이러한 경우, 유용할지라도 가능하면 함수 이름에 정보를 담는 편이 더 좋다.

아래 예제처럼 함수 이름을 바꿔서 말이다.
<pre>
<code>
protected abstract Responder responderBeingTested();
</code>
</pre>

***

#### 의도를 설명하는 주석

때떄로 주석은 구현을 이해하게 도와주는 선을 넘어서 의도까지 설명해주는 주석이 있다. 

아래 예제는 주석으로 흥미로운 결정을 기록한 예제다

<pre>
<code>
public int compareTo(Object o)
{
    if(o instanceof WikiPagePath){
        WikiPagePath p = (WikiPagePath) o;
        String compressedName = StringUtil.join(names, "");
        String compressedArgumentName = StringUtil.join(p.names, "");
        return compressedName.compareTo(compressedArgumentName);
    }
    return 1; //오른쪽 유형이므로 정렬 순위가 더 높다
}
</code>
</pre>

compareTo 메소드는 반환하는 값에 따라 정렬 조건이 달라진다.

해당 예제에서는 함수를 이미 알고 있기에, 의도를 설명해주면 더 도움이 되는 경우다.

***

#### 의미를 명료하게 밝히는 주석

주석은 그릇된 주석을 달아놓았을 때 상당히 위험하다.   주석이 올바른지 검증하기 쉽지 않기 때문이다.

아래 예제처럼, 표준 라이브러리나 변경하지 못하는 코드에 속한다면 의미를 명료하게 밝히는 주석이 유용하다.

하지만, 사용할 땐, 그릇된 주석을 달지 않도록 각별히 주의하자

<pre>
<code>
assertTrue(a.compareTo(a) == 0 ) // a == a
assertTrue(a.compareTo(b) != 0 // a != b
assertTrue(a.compareTo(b) == -1 ) // a < b
</code>
</pre>

***

#### 결과를 경고하는 주석 

때로는 다른 프로그래머에게 결과를 경고할 목적으로 주석을 사용한다.

아래 예제는, 특정 테스트 케이스를 꺼야하는 이유를 설명하는 주석이다.
<pre>
<code>
// 여유 시간이 충분하지 않다면 실행하지 마십시오
public void _testWithReallyBigFile(){
    writeLinesToFile(10000000);
	...
}
</code>
</pre>

***

#### TODO 주석 

때로는 앞으로 할 일을 주석으로 남겨두면 편하다. 

필요하다 여기지만 당장 구현하기 어려운 업무를 기술하는 것이다.

요즘 IDE에서는 TODO 주석 전부를 찾아주는 기능을 제공하기에 주석을 잊어버릴 염려도 거의 없기에, 같이 이용하면 편하다.

***

### 나쁜 주석

대다수 주석이 이 범주에 속하는 경우가 많다.

허술한 코드를 지탱하거나, 엉성한 코드를 변명하거나, 미숙한 결정을 합리화하는 등 그렇기에 아래 예제들을 보며 주의하도록 하자.

#### 주절거리는 주석

특별한 이유 없이, 의무감으로 혹은 프로세스에서 하라고 하기에 주석을 단다면 시간 낭비이다.

주석을 달기로 했다면, 충분히 시간을 들여, 의도를 녹여 좋은 주석을 달도록 노력해야한다.

***

#### 같은 이야기를 중복하는 주석

또한 코드에 있는 내용을 그대로 가져간 주석은 나쁜 주석에 속한다.

아무런 정보가 없기 때문이다. 도움이 되지 않을 수 밖에 없다.

***

#### 오해할 여지가 있는 주석

때때로 의도는 좋으나 프로그래머가 딱 맞을 정도로 엄밀하게 주석을 달지 못하기도 한다.

이러한 경우는 오해가 생길 수도, 살짝만 잘못된 정보로 의도와는 어긋난 사용을 할 수도 있다.

***

#### 의무적으로 다는 주석

주석을 달지 않아도 충분한 정보를 제공하는 경우에도, 주석을 다는 경우가 있다.

굳이 주석을 달아서, 혼동을 주는 경우는 피하도록 하자.

***

#### 이력을 기록하는 주석 

소스 관리 프로그램이 없을 때는, 편지할 때 마다 주석으로 기록을 남기기도 했다.

이제는 그럴 필요가 없다.

***

## 오늘의 기억하고 싶은 내용

### 주석으로 처리한 코드

주석으로 처리한 코드만큼 지저분한 코드도 없다. 

이런 코드는 이유가 있어서 잠시 이랬겠지 라고 생각해 다른 사람이 지우기를 주저하게 만든다. 

### 4장을 돌이켜보며

그간 코드를 작성해보며 나름대로 주석에 정성을 들였다고 생각을 하였습니다만...

잘한 것도, 못한 것도 뒤섞여 있지만, 여전히 주석에 대해서는 못한 것이 아직은 더 많다라고 느끼는 장이었던 것 같다.

또한, 주석을 다는 것에 이전부터 회의적이었기에, 그 의견에 대해 궁금하였는데 주석이 꾸준히 업데이트가 되지 않는다면, 언젠가 코드와 분리가 될 수 있다는 설명에서, 생각하지 못한 관점에서의 의견이라, 더 흥미를, 그리고 고민을 유발했던 장이었던 것 같았다.

***

## 해시태그 ##
#코딩 #개발자 #노마드코더 #북클럽 #노개북

***

## 작성시기 ##
2022.04.29

***